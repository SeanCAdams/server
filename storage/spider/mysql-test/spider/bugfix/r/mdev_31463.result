#
# MDEV-31463 SIGSEGV in server_mysql_send_query | server_mysql_real_query
#
for master_1
for child2
for child3
CREATE SERVER $srv FOREIGN DATA WRAPPER MYSQL OPTIONS (SOCKET "$MASTER_1_MYSOCK", DATABASE 'test',user 'root');
SET @old_wait_timeout = @@global.wait_timeout;
SET GLOBAL wait_timeout=1;
CREATE TABLE t (c INT KEY,c1 BLOB,c2 TEXT) ENGINE=Spider COMMENT='WRAPPER "mysql",srv "srv_mdev_31463"';
XA START 'a';
INSERT INTO t VALUES (0,0,0,0);
ERROR 21S01: Column count doesn't match value count at row 1
select sum(variable_value) into @threads_cached from information_schema.global_status where variable_name in ('threads_cached', 'threadpool_idle_threads');
INSERT INTO t VALUES (1,2,3),(4,5,6),(7,8,9);
ERROR 08S01: Got an error writing communication packets
SELECT * FROM information_schema.key_column_usage;
XA END 'a';
XA PREPARE 'a';
XA COMMIT 'a';
SET GLOBAL wait_timeout=@old_wait_timeout;
drop table t;
for master_1
for child2
for child3
